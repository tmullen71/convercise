"use strict";var ApplicationConfiguration=function(){var applicationModuleName="mean",applicationModuleVendorDependencies=["ngResource","ngAnimate","ui.router","ui.bootstrap","ui.utils","btford.socket-io"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("articles"),ApplicationConfiguration.registerModule("core",["angular-spinkit","angular-momentjs"]),ApplicationConfiguration.registerModule("doexch",["core","vr.directives.slider"]),ApplicationConfiguration.registerModule("users"),angular.module("core").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Classroom","articles","item","/articles(/create)?"),Menus.addMenuItem("topbar","Track Homework","articles","item","/articles(/create)?"),Menus.addMenuItem("topbar","Manage Assignments","articles","item","/articles(/create)?")}]),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/t_or_s.client.view.html"})}]),angular.module("core").controller("ClassroomController",["$scope","Authentication","Classroom",function($scope,Authentication,Classroom){$scope.authentication=Authentication,$scope.classroom=Classroom.get()}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication","$location","Socket","ExchInit","ModalService","ThisExch","SocketSetup","$timeout","Exchanges",function($scope,Authentication,$location,Socket,ExchInit,ModalService,ThisExch,SocketSetup,$timeout,Exchanges){var waitModal,modal,exchInvModalOptions={closeButtonText:"Not now",actionButtonText:"Join the Exchange",headerText:"Exchange invitation",bodyText1:"Somebody has invited you to an exchange."},startExchModalOptions={closeButtonText:"Cancel",actionButtonText:"Start",headerText:"Start Exchange",bodyText1:"Your partner has been notified and the exchange will begin 		now.",bodyText2:"This exchange will be recorded for your benefit and for the purposes 		of improving the service. Any conversations you wish to keep private 		should be held elsewhere. Click 'Start' to approve the recording 		and begin the exchange."},noPtnrModalOptions={closeButtonText:"Later",actionButtonText:"Go to schedule",headerText:"Bad news",bodyText1:"Sorry, no partners are currently available. Try again later, and be sure 		to fill in your schedule so that people know when you're available."};$scope.authentication=Authentication,$scope.taskpath="https://s3-ap-northeast-1.amazonaws.com/com.convercise.tasks",$scope.exchanges=Exchanges.query(),SocketSetup.setupDone||(Socket.on("noPtnr",function(){$timeout(function(){waitModal.close(),modal=ModalService,modal.showModal({},noPtnrModalOptions).then(function(){alert("TODO: Schedule")},function(){return!1})},2e3)}),Socket.on("/#setExchID",function(exchangeid,idString,doneTaskIds){ThisExch.id=exchangeid,ThisExch.role="inviter",ThisExch.querystring=idString,ThisExch.doneTaskIds=doneTaskIds}),Socket.on("/#setIdString",function(inviter){ThisExch.role="invitee",ThisExch.id=inviter.exchId,ThisExch.doneTaskIds=inviter.doneTaskIds,ThisExch.ptnrquery=ThisExch.id.toString()+inviter.userId.toString(),ThisExch.querystring=ThisExch.id.toString()+Authentication.user._id.toString(),modal=ModalService,modal.showModal({},startExchModalOptions).then(function(){ThisExch.ready=!0,$location.path("/doexch")},function(){alert("TODO: Cancel starting exchange Invitee")})}),Socket.on("/#incomingInvite",function(){console.log("invite"),alert("received invite"),modal=ModalService,modal.showModal({},exchInvModalOptions).then(function(){Socket.emit("/#acceptInvite")},function(){alert("TODO: Cancel invite response")})}),Socket.on("/#accepted",function(ptnrquery){ThisExch.ptnrquery=ptnrquery,waitModal.close(),modal=ModalService,modal.showModal({},startExchModalOptions).then(function(){ThisExch.ready=!0,$location.path("/doexch")},function(){alert("TODO: Cancel starting exchange inviter")})}),Socket.on("/#disinvite",function(){console.log("disinvite"),alert("received disinvite"),modal.close()}),SocketSetup.setupDone=!0),$scope.startExch=function(){var waitModalDefaults={backdrop:!1,keyboard:!1,modalFade:!1,size:"sm",templateUrl:"/partials/waitModal.html"},waitModalOptions={closeButtonText:"Cancel",bodyText1:"Looking for a partner"};waitModal=ModalService,waitModal.showModal(waitModalDefaults,waitModalOptions).then(function(){return!1},function(){ExchInit.cancelInvitation()}),ExchInit.findPtnrs()}}]),angular.module("core").directive("stretchdown",["$window","$timeout",function($window,$timeout){function link(scope,element){var resize=function(){var wh=$window.innerHeight,boxTop=element[0].getBoundingClientRect().top,newHeight=wh-boxTop-80;return element.css("height",newHeight+"px"),scope.$apply()};angular.element($window).bind("resize",resize),$timeout(resize,800)}return{link:link}}]),angular.module("core").filter("dur",[function(){return function(input){var minutes=Math.floor(input/1e3/60),seconds=input/1e3%60,timestring=seconds+" seconds";return minutes>0&&(timestring=minutes+" minutes and "+timestring),timestring}}]),angular.module("core").filter("iif",[function(){return function(input,trueValue,falseValue){return input?trueValue:falseValue}}]),angular.module("core").filter("langs",[function(){return function(input){var langs={en:"English",ja:"Japanese"};return langs[input]}}]),angular.module("core").factory("Classroom",["$resource",function($resource){return $resource("classroom/:classroomId",{classroomId:"@_id"},{update:{method:"PUT"}})}]),angular.module("core").factory("ExchInit",["Socket",function(Socket){return{findPtnrs:function(){Socket.emit("findPtnr")},cancelInvitation:function(){Socket.emit("cancelInvitation")}}}]),angular.module("core").factory("Exchanges",["$resource",function($resource){return $resource("exchanges/:exchangeId",{exchangeId:"@_id"},{update:{method:"PUT"}})}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["teacher"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("core").service("ModalService",["$modal",function($modal){var modal,modalDefaults={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/partials/modal.html"},modalOptions={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText1:"Perform this action?",bodyText2:""};this.showModal=function(customModalDefaults,customModalOptions){return customModalDefaults||(customModalDefaults={}),customModalDefaults.backdrop="static",this.show(customModalDefaults,customModalOptions)},this.show=function(customModalDefaults,customModalOptions){var tempModalDefaults={},tempModalOptions={};return angular.extend(tempModalDefaults,modalDefaults,customModalDefaults),angular.extend(tempModalOptions,modalOptions,customModalOptions),tempModalDefaults.controller||(tempModalDefaults.controller=function($scope,$modalInstance){$scope.modalOptions=tempModalOptions,$scope.modalOptions.ok=function(result){$modalInstance.close(result)},$scope.modalOptions.close=function(){$modalInstance.dismiss("cancel")}}),modal=$modal.open(tempModalDefaults),modal.result},this.close=function(){modal.close("responded")}}]),angular.module("core").factory("Socket",["socketFactory","$location",function(socketFactory,$location){return socketFactory({prefix:"",ioSocket:io.connect($location.protocol()+"://"+$location.host()+":"+$location.port())})}]),angular.module("core").service("SocketSetup",[function(){var socketSetup={setupDone:!1};return socketSetup}]),angular.module("core").service("ThisExch",["Authentication","$http",function(Authentication,$http){var exch_tasks=[],exch_data={},this_exch={ready:!1,id:null,role:null,querystring:null,doneTaskIds:[],myLearnerInd:null,taskTimes:[{begin:null,end:null},{begin:null,end:null}],get_task_inds:function(seens,min){if(0===seens.length)exch_tasks=[0,1];else{for(var j=0,len=seens.length;len>j;j++)if(seens[j]===min){seens=seens.slice(j+1);break}for(var i=0,offset=seens[0];exch_tasks.length<2;)seens[i-offset]>i&&(exch_tasks.push(i),offset+=1),i+=1}return console.log(exch_tasks),exch_tasks},setExchTasks:function(taskInds){exch_tasks=taskInds},addSeenTask:function(currentTask){console.log("TODO Adding "+exch_tasks[currentTask]+" to "+Authentication.user._id+"'s seen tasks")},submitDebrief:function(){console.log(Authentication)},submitExchange:function(doneTasks){exch_data.doneTasks=[null,null],exch_data.doneTasks[this_exch.myLearnerInd]={learner:doneTasks[this_exch.myLearnerInd].learner._id,beginTime:this_exch.taskTimes[this_exch.myLearnerInd].begin,endTime:this_exch.taskTimes[this_exch.myLearnerInd].end,duration:Date.parse(this_exch.taskTimes[this_exch.myLearnerInd].end)-Date.parse(this_exch.taskTimes[this_exch.myLearnerInd].begin),language:doneTasks[this_exch.myLearnerInd].langs,completed:!0,answer:doneTasks[this_exch.myLearnerInd].answer,task:doneTasks[this_exch.myLearnerInd].task._id},exch_data.doneTasks[1-this_exch.myLearnerInd]={nativeSpeaker:doneTasks[1-this_exch.myLearnerInd].nativeSpeaker._id};for(var updateDoneTask=function(iCopy){$http.put("http://localhost:3000/doneTasks/"+this_exch.doneTaskIds[iCopy],exch_data.doneTasks[iCopy]).success(function(data){console.log("Updated doneTask:"+data)})},i=0;1>=i;i++)updateDoneTask(i);var exchUpdate;"inviter"===this_exch.role?exchUpdate={state:"completed"}:"invitee"===this_exch.role&&(exchUpdate={invitee:Authentication.user._id}),$http.put("http://localhost:3000/exchanges/"+this_exch.id,exchUpdate).success(function(data){console.log("Updated Exchange:"+data)})}};return this_exch}]),angular.module("doexch").config(["$stateProvider",function($stateProvider){$stateProvider.state("doexch",{url:"/doexch",templateUrl:"modules/doexch/views/doexch.client.view.html"})}]),angular.module("doexch").controller("DoExchController",["$scope","Socket","Authentication","ThisExch","$location","DoExchSocketSetup","ModalService","$window","LangNames","$rootScope","$moment",function($scope,Socket,Authentication,ThisExch,$location,DoExchSocketSetup,ModalService,$window,LangNames,$rootScope,$moment){var waitModal,driver;$rootScope.streamStarted=!1,$scope.streamStarted=$rootScope.streamStarted,$scope.reportRequired=!0,$scope.reportMinChars=5,$scope.report="",$scope.killPeer=!1,$scope.ratePartner=2,$scope.ratePartnerSlider={floor:0,ceil:3,step:1},$scope.rateADiff=2,$scope.rateADiffSlider={floor:0,ceil:4,step:1},$scope.rateBDiff=2,$scope.rateBDiffSlider={floor:0,ceil:4,step:1},$scope.comment="",$scope.ratePartnerTrans=function(value){var ratings=["Unresponsive or inappropriate","Often used wrong language","Participated fully in the correct languages","Especially helpful"];return ratings[value]},$scope.rateDiffTrans=function(value){var ratings=["Very easy","Somewhat easy","Neither easy nor difficult","Somewhat difficult","Very difficult"];return ratings[value]},$scope.tasks=[],$scope.doneTasks=[{},{}],$scope.taskpath="https://s3-ap-northeast-1.amazonaws.com/com.convercise.tasks",$scope.acceptAnswer=function(){$scope.doneTasks[$scope.ct_task].state=2,ThisExch.addSeenTask($scope.ct_task),Socket.emit("acceptAnswer",ThisExch.ptnrSocket)},$scope.wrongAnswer=function(){$scope.doneTasks[$scope.ct_task].state=3,Socket.emit("wrongAnswer",ThisExch.ptnrSocket)},$scope.rightAnswer=function(){finishTask(),Socket.emit("finishTask",ThisExch.ptnrSocket)},$scope.acceptFinalAnswer=function(){finishTask(),Socket.emit("finishTask",ThisExch.ptnrSocket)},$scope.submitDebrief=function(){ThisExch.submitDebrief($scope.report,$scope.ratePartner,$scope.rateADiff,$scope.rateBDiff,$scope.comment)},$scope.$on("$destroy",function(){Socket.removeListener("chatMessage")});var finishTask=function(){0===$scope.ct_task?(ThisExch.taskTimes[0].end=$moment().format(),$scope.ct_task=1,$scope.doneTasks[$scope.ct_task].state=1,setCurrent(),ThisExch.taskTimes[1].begin=$moment().format()):(ThisExch.taskTimes[1].end=$moment().format(),goodbye())},goodbye=function(){var waitModalDefaults={backdrop:!1,keyboard:!1,modalFade:!1,size:"sm",templateUrl:"/partials/okOnlyModal.html"},waitModalOptions={headerText:"Congratulations!",closeButtonText:"Finish",bodyText1:"You've completed both puzzles.",bodyText2:"Say goodbye to your partner, then click 'Finish' to go to the debriefing page and complete the exchange."};waitModal=ModalService,waitModal.showModal(waitModalDefaults,waitModalOptions).then(function(){return!1},function(){Socket.emit("goToDebrief",ThisExch.ptnrSocket),debrief()})},setCurrent=function(){$scope.doneTasks[$scope.ct_task].img=ThisExch.role===driver?$scope.doneTasks[$scope.ct_task].task.img1:$scope.doneTasks[$scope.ct_task].task.img2,$scope.doneTasks[$scope.ct_task].langs===Authentication.user.l1?($scope.doneTasks[$scope.ct_task]["native"]=!0,$scope.doneTasks[$scope.ct_task].nativeSpeaker=Authentication.user):$scope.doneTasks[$scope.ct_task].langs===Authentication.user.l2&&($scope.doneTasks[$scope.ct_task]["native"]=!1,$scope.doneTasks[$scope.ct_task].learner=Authentication.user,ThisExch.myLearnerInd=$scope.ct_task),$scope.doneTasks[$scope.ct_task]["native"]||($scope.onAnswerChange=function(newValue){Socket.emit("answerChange",newValue.answer,ThisExch.ptnrSocket)},$scope.$watch(function(){return $scope.doneTasks[$scope.ct_task]},$scope.onAnswerChange,!0))},debrief=function(){$scope.killPeer=!0,ThisExch.submitExchange($scope.doneTasks),$scope.doneTasks[$scope.ct_task].state=5,$scope.$broadcast("refreshSlider")};DoExchSocketSetup.setupDone||(Socket.on("/#setWaitModal",function(){var waitModalDefaults={backdrop:!1,keyboard:!1,modalFade:!1,size:"sm",templateUrl:"/partials/waitModal.html"},waitModalOptions={closeButtonText:"Cancel",bodyText1:"Your partner will join you in a moment."};waitModal=ModalService,waitModal.showModal(waitModalDefaults,waitModalOptions).then(function(){return!1},function(){alert("TODO: Cancel starting exchange")})}),Socket.on("/#passSocketInfo",function(socketid,partnerseens){waitModal.close("responded"),ThisExch.ptnrSocket=socketid;var myseens=Authentication.user.seentasks,seens=_.union(Authentication.user.seentasks,partnerseens).sort(function(a,b){return a-b}),mymin="undefined"!=typeof myseens[0]?myseens[0]:0,allmin="undefined"!=typeof seens[0]?seens[0]:0,min=mymin>allmin?mymin:allmin,exch_task_inds=ThisExch.get_task_inds(seens,min),exch_langs=_.shuffle([Authentication.user.l1,Authentication.user.l2]);Socket.emit("/#exchParams",ThisExch.ptnrSocket,exch_task_inds,exch_langs)}),Socket.on("/#setPtnrSocket",function(ptnrSocket){ThisExch.ptnrSocket=ptnrSocket,ThisExch.makeCall=!0}),Socket.on("/#taskData",function(taskInds,tasks,exch_langs,d){ThisExch.setExchTasks(taskInds),driver=d,$scope.ct_task=0,$scope.doneTasks[0].answer="",$scope.doneTasks[1].answer="",$scope.doneTasks[$scope.ct_task].state=1,$scope.doneTasks[0].langs=exch_langs[0],$scope.doneTasks[0].langfull=LangNames[exch_langs[0]],$scope.doneTasks[1].langs=exch_langs[1],$scope.doneTasks[1].langfull=LangNames[exch_langs[1]],$scope.doneTasks[0].task=tasks[0],$scope.doneTasks[1].task=tasks[1],$scope.doneTasks[0].ind=taskInds[0],$scope.doneTasks[1].ind=taskInds[1],setCurrent()}),Socket.on("answerChange",function(newAnswer){$scope.doneTasks[$scope.ct_task]["native"]&&($scope.doneTasks[$scope.ct_task].answer=newAnswer)}),Socket.on("acceptAnswer",function(){ThisExch.addSeenTask($scope.ct_task),$scope.doneTasks[$scope.ct_task].state=2}),Socket.on("wrongAnswer",function(){$scope.doneTasks[$scope.ct_task].state=3}),Socket.on("finishTask",function(){finishTask()}),Socket.on("goToDebrief",function(){waitModal.close("hungUp"),debrief()}),DoExchSocketSetup.setupDone=!0);var init=function(){ThisExch.ready?Socket.emit("setReadyOrGo",ThisExch.id):($location.url("/"),$window.location.href="/")};init()}]),angular.module("doexch").directive("twentyTwenty",[function(){return{restrict:"A",link:function(scope,element){$(element).twentytwenty();var intrvl=0,timer=setInterval(function(){$(window).trigger("resize"),intrvl+=1},1);intrvl>20&&clearInterval(timer)}}}]),angular.module("doexch").directive("videoChat",["$window","ThisExch","$rootScope","$moment",function($window,ThisExch,$rootScope,$moment){return{restrict:"E",template:'<div><div class="video-container"><video class="vid-chat" id="their-video" autoplay></video><video class="vid-chat" id="my-video" muted="true" autoplay></video></div></div>',link:function(scope,element,attributes){function step1(){navigator.getUserMedia({audio:!0,video:!0},function(stream){localStreamReady=!0,remoteStreamReady&&(ThisExch.taskTimes[0].begin=$moment().format()),scope.$apply(function(){scope.$root.streamStarted=!0,$("#my-video").prop("src",URL.createObjectURL(stream)),window.localStream=stream,ThisExch.makeCall&&makeCall(stream),window.existingCall&&window.existingCall.answer(stream)})},function(){$("#step1-error").show()})}function step3(call){window.existingCall&&window.existingCall.close(),call.on("stream",function(stream){remoteStreamReady=!0,localStreamReady&&(ThisExch.taskTimes[0].begin=$moment().format()),$("#their-video").prop("src",URL.createObjectURL(stream))}),window.existingCall=call}if(!ThisExch.ready)return null;ThisExch.ready=!1;var remoteStreamReady=!1,localStreamReady=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,scope.$watch(attributes.killpeer,function(newValue){newValue===!0&&endCall()});var peer=new Peer(ThisExch.querystring,{key:"wfoc88235mnp14i",debug:3,config:{iceServers:[{url:"stun:stun.l.google.com:19302"}]}});peer.on("call",function(call){window.localStream&&call.answer(window.localStream),step3(call)}),peer.on("error",function(err){alert(err.message)});var makeCall=function(stream){var call=peer.call(ThisExch.ptnrquery,stream);step3(call)},endCall=function(){window.localStream.stop(),peer.disconnect()};step1()}}}]),angular.module("doexch").service("DoExchSocketSetup",[function(){var socketSetup={setupDone:!1};return socketSetup}]),angular.module("doexch").service("LangNames",[function(){var langnames={ja:"Japanese",en:"English"};return langnames}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication;var langs=[{name:"English","short":"en"},{name:"Japanese","short":"ja"}];$scope.langs=langs,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",["$window",function($window){var auth={user:$window.user};return auth}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]),angular.module("mean").run(["$templateCache",function($templateCache){$templateCache.put("/assets/modules/core/views/header.client.view.html",'<div class="container" data-ng-controller="HeaderController"><div class="navbar-header"><button class="navbar-toggle" type="button" data-ng-click="toggleCollapsibleMenu()"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/#!/" class="navbar-brand">Convercise</a></div><nav class="collapse navbar-collapse" collapse="!isCollapsed" role="navigation"><ul class="nav navbar-nav" data-ng-if="menu.shouldRender(authentication.user);"><li data-ng-repeat="item in menu.items | orderBy: \'position\'" data-ng-if="item.shouldRender(authentication.user);" ng-switch="item.menuItemType" ui-route="{{item.uiRoute}}" class="{{item.menuItemClass}}" ng-class="{active: ($uiRoute)}" dropdown="item.menuItemType === \'dropdown\'"><a ng-switch-when="dropdown" class="dropdown-toggle"><span data-ng-bind="item.title"></span> <b class="caret"></b></a><ul ng-switch-when="dropdown" class="dropdown-menu"><li data-ng-repeat="subitem in item.items | orderBy: \'position\'" data-ng-if="subitem.shouldRender(authentication.user);" ui-route="{{subitem.uiRoute}}" ng-class="{active: $uiRoute}"><a href="/#!/{{subitem.link}}" data-ng-bind="subitem.title"></a></li></ul><a ng-switch-default href="/#!/{{item.link}}" data-ng-bind="item.title"></a></li></ul><ul class="nav navbar-nav navbar-right" data-ng-hide="authentication.user"><li ui-route="/signup" ng-class="{active: $uiRoute}"><a href="/#!/signup">Sign Up</a></li><li class="divider-vertical"></li><li ui-route="/signin" ng-class="{active: $uiRoute}"><a href="/#!/signin">Sign In</a></li></ul><ul class="nav navbar-nav navbar-right" data-ng-show="authentication.user"><li class="dropdown" dropdown><a href="#" class="dropdown-toggle" data-toggle="dropdown" dropdown-toggle><span data-ng-bind="authentication.user.displayName"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/#!/settings/profile">Edit Profile</a></li><li><a href="/#!/settings/accounts">Manage Social Accounts</a></li><li data-ng-show="authentication.user.provider === \'local\'"><a href="/#!/settings/password">Change Password</a></li><li class="divider"></li><li><a href="/auth/signout">Signout</a></li></ul></li></ul></nav></div>'),$templateCache.put("/assets/modules/core/views/home.client.view.html",'<section data-ng-controller="HomeController"><div class="jumbotron text-center"><div data-ng-hide="authentication.user" class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-12"><img alt="Convercise" src="modules/core/img/brand/yinyang60.png"></div></div><br><div data-ng-hide="authentication.user" class="row"><p class="lead">Get started!</p></div><div id="topPageBtns" data-ng-show="authentication.user"><div class="row btnsRow"><p class="topPageBtnsContainer"><a class="top-btn btn btn-primary btn-lg" ng-click="startExch()" target="_blank">Start exchange</a> <a class="top-btn btn btn-primary btn-lg" href="#/schedule" target="_blank">Set schedule</a></p></div></div><div class="listBody"><h4>Completed Exchanges</h4><div stretchdown class="exchangesContainer"><div><accordion close-others="true"><accordion-group ng-repeat="exchange in exchanges"><accordion-heading><div class="accHeader"><span class="glyphicon glyphicon-star"></span> {{exchange.created | date:\'medium\'}}<div ng-if="true" class="reptNotice"><span class="glyphicon glyphicon-exclamation-sign"></span></div></div></accordion-heading><div class="audioPlayer"><div class="playerIcons"><span class="glyphicon glyphicon-play"></span> <span class="glyphicon glyphicon-pause"></span> <span class="glyphicon glyphicon-stop"></span></div></div><div class="panel panel-default" ng-repeat="dt in exchange.doneTasks"><div class="panel-body taskPanel"><table><col width="100"><tr><td class="taskDisplay"><div class="taskImg"><img ng-src="{{taskpath}}/{{dt.task.ind}}/thumb.jpg" height="100" width="100"></div></td><td><div class="taskInfo"><div>Task carried out in {{dt.language|langs}}</div><div>Partner: {{authentication.user.displayName == dt.learner.displayName | iif: dt.nativeSpeaker.displayName : dt.learner.displayName}}</div><div>Duration: {{dt.duration| dur}}</div><div>Your answer was:</div><div class="answerArea">{{dt.answer}}</div></div></td></tr></table></div></div><accordion class="reportArea" close-others="false"><accordion-group><accordion-heading>Report</accordion-heading>A report.</accordion-group></accordion></accordion-group></accordion></div></div></div></div></section>'),$templateCache.put("/assets/modules/core/views/t_or_s.client.view.html",'<div data-ng-controller="HeaderController"><div data-ng-if="authentication.user.roles[0] == \'user\'" data-ng-include="\'/modules/core/views/home.client.view.html\'"></div><div data-ng-if="authentication.user.roles[0] == \'teacher\'" data-ng-include="\'/modules/core/views/teacher.client.view.html\'"></div>'),$templateCache.put("/assets/modules/core/views/teacher.client.view.html",'<section data-ng-controller="ClassroomController"><h4>Your classroom</h4><accordion class="requests" ng-if="classroom.requests.length > 0"><accordion-group><accordion-heading><button class="btn-acceptReq btn btn-success btn-xs">Accept all</button><div class="reqHead"><span>New class join requests</span><span class="badge">{{classroom.requests.length}}</span></div></accordion-heading><table class="table-reqs table table-striped table-bordered"><tr ng-repeat="req in classroom.requests"><td>{{req.displayName}}</td><td>{{req.email}}</td><td><div class="btn-group btn-group-xs"><button class="btn btn-success">Accept</button> <button class="btn btn-danger">Reject</button></div></td></tr></table></accordion-group></accordion><div class="classroom"><div class="classBtns"><div class="addStudent"><input type="email" class="form-control addStudentEmail" placeholder="Enter email of student to add"> <button class="btn btn-primary btn-small">Add student</button></div><button class="btn btn-primary btn-small">Email student(s)</button> <button class="btn btn-primary btn-small">Remove student(s)</button> <button class="btn btn-primary btn-small">Export to file</button></div><table class="table-classroom table table-striped table-bordered"><tr><td></td><td></td><td>Name</td><td>Email</td><td>Section</td><td>Completed</td><td>Time Spent</td><td>L1:L2</td><td>Alerts</td></tr><tr><tbody ng-repeat="section in classroom.sections"><tr ng-repeat="student in section.members"><td ng-if="$index == 0" rowspan="{{section.members.length}}">{{section.name}}</td><td><input type="checkbox"></td><td>{{student.displayName}}</td><td>{{student.email}}</td><td><div class="btn-group" dropdown><button type="button" class="btn btn-primary btn-xs dropdown-toggle" dropdown-toggle>A <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li>B</li><li>C</li></ul></div></td><td>{{student.completed}}5 exchanges</td><td>{{student.timespent}}37 mins</td><td>{{student.l1_l2}}6:4</td><td>{{student.alerts}}<span class="label label-success">No</span></td></tr></tbody></tr></table></div></section>'),$templateCache.put("/assets/modules/doexch/views/doexch.client.view.html",'<section data-ng-controller="DoExchController"><div data-ng-show="doneTasks[ct_task].state < 5 && doneTasks[ct_task].task.type == \'ftd-img\'" data-ng-include="\'/modules/doexch/views/partials/ftd-img.html\'"></div><div data-ng-show="doneTasks[ct_task].state < 5 && doneTasks[ct_task].task.type == \'loc-inst\'" data-ng-include="\'/modules/doexch/views/partials/loc-inst.html\'"></div><div data-ng-show="doneTasks[ct_task].state === 5" data-ng-include="\'/modules/doexch/views/partials/debrief.html\'"></div></section>'),$templateCache.put("/assets/modules/doexch/views/partials/debrief.html",'<style>slider {\n  display: inline-block;\n  position: relative;\n  height: 7px;\n  width: 100%;\n  margin: 50px 5px 5px 5px;\n  vertical-align: middle;\n}\nslider span {\n  white-space: normal!important;\n  width: 200px;\n  text-align: center;\n  position: absolute;\n  display: inline-block;\n}\nslider span.base {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\nslider span.bar {\n  width: 100%;\n  height: 100%;\n  z-index: 0;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #c0c0c0), color-stop(1, #8d8d8d));\n  background: -webkit-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -moz-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -o-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -ms-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  -webkit-box-shadow: inset 2px 2px 5px;\n  box-shadow: inset 2px 2px 5px;\n}\nslider span.bar.selection {\n  width: 0%;\n  z-index: 1;\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #13b6ff), color-stop(1, #00a8f3));\n  background: -webkit-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -moz-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -o-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -ms-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\nslider span.pointer {\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  top: -12px;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 2;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n}\nslider span.pointer:after {\n  content: \'\';\n  background-color: #808080;\n  width: 16px;\n  height: 16px;\n  position: absolute;\n  top: 6px;\n  left: 5.5px;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n}\nslider span.pointer:hover:after {\n  background-color: #000;\n}\nslider span.pointer.active:after {\n  background-color: #f00;\n}\nslider span.bubble {\n  cursor: default;\n  top: -45px;\n  padding: 1px 3px 1px 3px;\n  font-size: 1em;\n  font-family: sans-serif;\n}\nslider span.bubble.selection {\n  top: 15px;\n}\nslider span.bubble.limit {\n  color: #808080;\n}</style><div class="panel panel-default" ng-cloak><div class="panel-heading"><h3 class="panel-title">Please answer these questions and click \'Submit\' to complete the exchange</h3></div><div class="panel-body"><div ng-show="reportRequired" ng-class="{\'reportUndonePanel\': report.length < reportMinChars}" class="panel panel-default debriefItemPanel"><div class="panel-body"><div class="reportLabel"><label for="report">Your class requires a report of at least {{reportMinChars}} characters:</label><button ng-show="report.length < reportMinChars" type="button" class="report-do-later-btn btn btn-danger btn-xs" ng-click="reportRequired = false">Do this later</button></div><textarea ng-model="report" class="debriefTextArea form-control" rows="10" id="report" resize="none"></textarea></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="ratePartnerSlider">Please rate your partner\'s participation during this exchange.</label><div id="ratePartnerSlider"><slider floor="{{ratePartnerSlider.floor}}" ceiling="{{ratePartnerSlider.ceil}}" step="{{ratePartnerSlider.step}}" translate-fn="ratePartnerTrans" ng-model="ratePartner"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="rateADiffSlider">Please rate the difficulty of the first puzzle.</label><div id="rateADiffSlider"><slider floor="{{rateADiffSlider.floor}}" ceiling="{{rateADiffSlider.ceil}}" step="{{rateADiffSlider.step}}" translate-fn="rateDiffTrans" ng-model="rateADiff"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="rateBDiffSlider">Please rate the difficulty of the second puzzle.</label><div id="rateBDiffSlider"><slider floor="{{rateBDiffSlider.floor}}" ceiling="{{rateBDiffSlider.ceil}}" step="{{rateBDiffSlider.step}}" translate-fn="rateDiffTrans" ng-model="rateBDiff"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="comment">Any further thoughts or comments:</label><textarea class="debriefTextArea form-control" rows="10" id="comment" resize="none"></textarea></div></div><a class="btn btn-primary btn-lg" ng-click="submitDebrief()" target="_blank">Submit</a></div><div></div></div>'),$templateCache.put("/assets/modules/doexch/views/partials/ftd-img.html",'<style>div#v-streams {display: inline-block}\n  img.puzzle_img {float:left; width: 400px}\n  div.twentyTwentyContainer{float:left; width: 400px}\n  div.vstream {width: 150px; height: 100px; border: 2px solid}</style><div ng-hide="$root.streamStarted" class="panel panel-default" ng-cloak>You need to permit Convercise to access your camera and mic.</div><div ng-show="$root.streamStarted" class="panel panel-default" ng-cloak><div class="panel-heading"><h2 class="panel-title">Do this puzzle in {{doneTasks[ct_task].langfull}}</h2></div><div class="panel-body"><div class="top-part"><div ng-if="doneTasks[ct_task].state == 1" class="img_div"><img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].img}}"></div><div class="twentyTwentyContainer" data-ng-show="doneTasks[ct_task].state > 1"><div twenty-twenty="true" id="compareImgs" ng-if="doneTasks[ct_task].state > 1" class="img_div"><img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].task.img1}}"> <img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].task.img2}}"></div></div><video-chat killpeer="killPeer"></video-chat></div><div ng-if="doneTasks[ct_task].state == 1" class="instructions">Talk to your partner to find the difference between the pictures you see.</div><div ng-if="doneTasks[ct_task].state == 2" class="instructions">Was your answer correct?</div><div ng-if="doneTasks[ct_task].state == 3" class="instructions">Enter the correct answer.</div><div class="bottom-part"><div class="bottom-div"><div class="answerText" id="text"><textarea ng-if="doneTasks[ct_task].state == 1 || doneTasks[ct_task].state == 3" data-ng-hide="doneTasks[ct_task].native" id="textinput" class="answerTextInput" data-ng-model="doneTasks[ct_task].answer" placeholder="Enter Your Answer Here"></textarea><span ng-if="doneTasks[ct_task].state == 2" data-ng-hide="doneTasks[ct_task].native">{{doneTasks[ct_task].answer}}</span> <span data-ng-show="doneTasks[ct_task].native">{{doneTasks[ct_task].answer}}</span></div><a ng-if="doneTasks[ct_task].state == 1" data-ng-show="doneTasks[ct_task].native" class="accceptAnswBtn btn btn-primary btn-lg" ng-click="acceptAnswer()" target="_blank" ng-disabled="doneTasks[ct_task].answer.length < 4">Accept your partner\'s answer</a><div ng-if="doneTasks[ct_task].state == 1" data-ng-hide="doneTasks[ct_task].native" class="learnerInst">With your partner\'s help, compose an answer and write it in the field to the left.</div><div ng-if="doneTasks[ct_task].state == 2" class="accceptAnswBtnsDiv"><a class="yesOrNoBtn btn btn-primary btn-lg" ng-click="rightAnswer()" target="_blank">Yes</a> <a class="yesOrNoBtn btn btn-warning btn-lg" ng-click="wrongAnswer()" target="_blank">No</a></div><a ng-if="doneTasks[ct_task].state == 3" data-ng-show="doneTasks[ct_task].native" class="accceptAnswBtn btn btn-primary btn-lg" ng-click="acceptFinalAnswer()" target="_blank">Accept the final answer</a></div></div></div></div>'),$templateCache.put("/assets/modules/doexch/views/partials/loc-inst.html",'<style>div#v-streams {display: inline-block}\nimg.puzzle_img {float:left; width: 400px}\ndiv.twentyTwentyContainer{float:left; width: 400px}\ndiv.vstream {width: 150px; height: 100px; border: 2px solid}</style><div class="panel panel-default" ng-cloak><div class="panel-heading"><h3 class="panel-title">Do this puzzle in {{tasks[ct_task].langs}}</h3></div><div class="panel-body"><ng-i f="tasks[ct_task].state == 1">{{taskpath}}/{{tasks[ct_task].ind}}/{{tasks[ct_task].sktch}}<canvas loc-inst-processing="sketch" ng-click="move($sketch)"></canvas><div><div><div></div></div></div></ng-i></div></div>'),$templateCache.put("/assets/modules/users/views/authentication/signin.client.view.html",'<section class="row" data-ng-controller="AuthenticationController"><h3 class="col-md-12 text-center">Sign in using your social accounts</h3><div class="col-md-12 text-center"><a href="/auth/facebook" class="undecorated-link"><img src="/modules/users/img/buttons/facebook.png"></a> <a href="/auth/twitter" class="undecorated-link"><img src="/modules/users/img/buttons/twitter.png"></a> <a href="/auth/google" class="undecorated-link"><img src="/modules/users/img/buttons/google.png"></a> <a href="/auth/linkedin" class="undecorated-link"><img src="/modules/users/img/buttons/linkedin.png"></a> <a href="/auth/github" class="undecorated-link"><img src="/modules/users/img/buttons/github.png"></a></div><h3 class="col-md-12 text-center">Or with your account</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="signin()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="form-group"><label for="password">Password</label><input type="password" id="password" name="password" class="form-control" data-ng-model="credentials.password" placeholder="Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-primary">Sign in</button>&nbsp; or&nbsp; <a href="/#!/signup">Sign up</a></div><div class="forgot-password"><a href="/#!/password/forgot">Forgot your password?</a></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/authentication/signup.client.view.html",'<section class="row" data-ng-controller="AuthenticationController"><h3 class="col-md-12 text-center">Sign up now!</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form name="userForm" data-ng-submit="signup()" class="signin form-horizontal" novalidate autocomplete="off"><fieldset><div class="form-group"><label for="firstName">First Name</label><input type="text" required id="firstName" name="firstName" class="form-control" data-ng-model="credentials.firstName" placeholder="First Name"></div><div class="form-group"><label for="lastName">Last Name</label><input type="text" id="lastName" name="lastName" class="form-control" data-ng-model="credentials.lastName" placeholder="Last Name"></div><div class="form-group"><label for="email">Email</label><input type="email" id="email" name="email" class="form-control" data-ng-model="credentials.email" placeholder="Email"></div><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="form-group"><label for="l1">First language</label><select class="form-control" data-ng-model="credentials.l1" ng-options="lang.short as lang.name for lang in langs"></select></div><div class="form-group"><label for="l2">Learning language</label><select class="form-control" data-ng-model="credentials.l2" ng-options="lang.short as lang.name for lang in langs"></select></div><div class="form-group"><label for="password">Password</label><input type="password" id="password" name="password" class="form-control" data-ng-model="credentials.password" placeholder="Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Sign up</button>&nbsp; or&nbsp; <a href="/#!/signin" class="show-signup">Sign in</a></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/password/forgot-password.client.view.html",'<section class="row" data-ng-controller="PasswordController"><h3 class="col-md-12 text-center">Restore your password</h3><p class="small text-center">Enter your account username.</p><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="askForPasswordReset()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="text-center form-group"><button type="submit" class="btn btn-primary">Submit</button></div><div data-ng-show="error" class="text-center text-danger"><strong>{{error}}</strong></div><div data-ng-show="success" class="text-center text-success"><strong>{{success}}</strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password-invalid.client.view.html",'<section class="row text-center"><h3 class="col-md-12">Password reset is invalid</h3><a href="/#!/password/forgot" class="col-md-12">Ask for a new password reset</a></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password-success.client.view.html",'<section class="row text-center"><h3 class="col-md-12">Password successfully reset</h3><a href="/#!/" class="col-md-12">Continue to home page</a></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password.client.view.html",'<section class="row" data-ng-controller="PasswordController"><h3 class="col-md-12 text-center">Reset your password</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="resetUserPassword()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="newPassword">New Password</label><input type="password" id="newPassword" name="newPassword" class="form-control" data-ng-model="passwordDetails.newPassword" placeholder="New Password"></div><div class="form-group"><label for="verifyPassword">Verify Password</label><input type="password" id="verifyPassword" name="verifyPassword" class="form-control" data-ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Update Password</button></div><div data-ng-show="error" class="text-center text-danger"><strong>{{error}}</strong></div><div data-ng-show="success" class="text-center text-success"><strong>{{success}}</strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/change-password.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center">Change your password</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="changeUserPassword()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="currentPassword">Current Password</label><input type="password" id="currentPassword" name="currentPassword" class="form-control" data-ng-model="passwordDetails.currentPassword" placeholder="Current Password"></div><div class="form-group"><label for="newPassword">New Password</label><input type="password" id="newPassword" name="newPassword" class="form-control" data-ng-model="passwordDetails.newPassword" placeholder="New Password"></div><div class="form-group"><label for="verifyPassword">Verify Password</label><input type="password" id="verifyPassword" name="verifyPassword" class="form-control" data-ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Save Password</button></div><div data-ng-show="success" class="text-center text-success"><strong>Password Changed Successfully</strong></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/edit-profile.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center">Edit your profile</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form name="userForm" data-ng-submit="updateUserProfile(userForm.$valid)" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="firstName">First Name</label><input type="text" id="firstName" name="firstName" class="form-control" data-ng-model="user.firstName" placeholder="First Name"></div><div class="form-group"><label for="lastName">Last Name</label><input type="text" id="lastName" name="lastName" class="form-control" data-ng-model="user.lastName" placeholder="Last Name"></div><div class="form-group"><label for="email">Email</label><input type="email" id="email" name="email" class="form-control" data-ng-model="user.email" placeholder="Email"></div><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="user.username" placeholder="Username"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Save Profile</button></div><div data-ng-show="success" class="text-center text-success"><strong>Profile Saved Successfully</strong></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/social-accounts.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center" data-ng-show="hasConnectedAdditionalSocialAccounts()">Connected social accounts:</h3><div class="col-md-12 text-center"><div data-ng-repeat="(providerName, providerData) in user.additionalProvidersData" class="remove-account-container"><img ng-src="/modules/users/img/buttons/{{providerName}}.png"> <a class="btn btn-danger btn-remove-account" data-ng-click="removeUserSocialAccount(providerName)"><i class="glyphicon glyphicon-trash"></i></a></div></div><h3 class="col-md-12 text-center">Connect other social accounts:</h3><div class="col-md-12 text-center"><a href="/auth/facebook" data-ng-hide="isConnectedSocialAccount(\'facebook\')" class="undecorated-link"><img src="/modules/users/img/buttons/facebook.png"></a> <a href="/auth/twitter" data-ng-hide="isConnectedSocialAccount(\'twitter\')" class="undecorated-link"><img src="/modules/users/img/buttons/twitter.png"></a> <a href="/auth/google" data-ng-hide="isConnectedSocialAccount(\'google\')" class="undecorated-link"><img src="/modules/users/img/buttons/google.png"></a> <a href="/auth/linkedin" data-ng-hide="isConnectedSocialAccount(\'linkedin\')" class="undecorated-link"><img src="/modules/users/img/buttons/linkedin.png"></a> <a href="/auth/github" data-ng-hide="isConnectedSocialAccount(\'github\')" class="undecorated-link"><img src="/modules/users/img/buttons/github.png"></a></div></section>')
}]),angular.module("mean").run(["$templateCache",function($templateCache){$templateCache.put("/assets/modules/core/views/header.client.view.html",'<div class="container" data-ng-controller="HeaderController"><div class="navbar-header"><button class="navbar-toggle" type="button" data-ng-click="toggleCollapsibleMenu()"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/#!/" class="navbar-brand">Convercise</a></div><nav class="collapse navbar-collapse" collapse="!isCollapsed" role="navigation"><ul class="nav navbar-nav" data-ng-if="menu.shouldRender(authentication.user);"><li data-ng-repeat="item in menu.items | orderBy: \'position\'" data-ng-if="item.shouldRender(authentication.user);" ng-switch="item.menuItemType" ui-route="{{item.uiRoute}}" class="{{item.menuItemClass}}" ng-class="{active: ($uiRoute)}" dropdown="item.menuItemType === \'dropdown\'"><a ng-switch-when="dropdown" class="dropdown-toggle"><span data-ng-bind="item.title"></span> <b class="caret"></b></a><ul ng-switch-when="dropdown" class="dropdown-menu"><li data-ng-repeat="subitem in item.items | orderBy: \'position\'" data-ng-if="subitem.shouldRender(authentication.user);" ui-route="{{subitem.uiRoute}}" ng-class="{active: $uiRoute}"><a href="/#!/{{subitem.link}}" data-ng-bind="subitem.title"></a></li></ul><a ng-switch-default href="/#!/{{item.link}}" data-ng-bind="item.title"></a></li></ul><ul class="nav navbar-nav navbar-right" data-ng-hide="authentication.user"><li ui-route="/signup" ng-class="{active: $uiRoute}"><a href="/#!/signup">Sign Up</a></li><li class="divider-vertical"></li><li ui-route="/signin" ng-class="{active: $uiRoute}"><a href="/#!/signin">Sign In</a></li></ul><ul class="nav navbar-nav navbar-right" data-ng-show="authentication.user"><li class="dropdown" dropdown><a href="#" class="dropdown-toggle" data-toggle="dropdown" dropdown-toggle><span data-ng-bind="authentication.user.displayName"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/#!/settings/profile">Edit Profile</a></li><li><a href="/#!/settings/accounts">Manage Social Accounts</a></li><li data-ng-show="authentication.user.provider === \'local\'"><a href="/#!/settings/password">Change Password</a></li><li class="divider"></li><li><a href="/auth/signout">Signout</a></li></ul></li></ul></nav></div>'),$templateCache.put("/assets/modules/core/views/home.client.view.html",'<section data-ng-controller="HomeController"><div class="jumbotron text-center"><div data-ng-hide="authentication.user" class="row"><div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-12"><img alt="Convercise" src="modules/core/img/brand/yinyang60.png"></div></div><br><div data-ng-hide="authentication.user" class="row"><p class="lead">Get started!</p></div><div id="topPageBtns" data-ng-show="authentication.user"><div class="row btnsRow"><p class="topPageBtnsContainer"><a class="top-btn btn btn-primary btn-lg" ng-click="startExch()" target="_blank">Start exchange</a> <a class="top-btn btn btn-primary btn-lg" href="#/schedule" target="_blank">Set schedule</a></p></div></div><div class="listBody"><h4>Completed Exchanges</h4><div stretchdown class="exchangesContainer"><div><accordion close-others="true"><accordion-group ng-repeat="exchange in exchanges"><accordion-heading><div class="accHeader"><span class="glyphicon glyphicon-star"></span> {{exchange.created | date:\'medium\'}}<div ng-if="true" class="reptNotice"><span class="glyphicon glyphicon-exclamation-sign"></span></div></div></accordion-heading><div class="audioPlayer"><div class="playerIcons"><span class="glyphicon glyphicon-play"></span> <span class="glyphicon glyphicon-pause"></span> <span class="glyphicon glyphicon-stop"></span></div></div><div class="panel panel-default" ng-repeat="dt in exchange.doneTasks"><div class="panel-body taskPanel"><table><col width="100"><tr><td class="taskDisplay"><div class="taskImg"><img ng-src="{{taskpath}}/{{dt.task.ind}}/thumb.jpg" height="100" width="100"></div></td><td><div class="taskInfo"><div>Task carried out in {{dt.language|langs}}</div><div>Partner: {{authentication.user.displayName == dt.learner.displayName | iif: dt.nativeSpeaker.displayName : dt.learner.displayName}}</div><div>Duration: {{dt.duration| dur}}</div><div>Your answer was:</div><div class="answerArea">{{dt.answer}}</div></div></td></tr></table></div></div><accordion class="reportArea" close-others="false"><accordion-group><accordion-heading>Report</accordion-heading>A report.</accordion-group></accordion></accordion-group></accordion></div></div></div></div></section>'),$templateCache.put("/assets/modules/core/views/t_or_s.client.view.html",'<div data-ng-controller="HeaderController"><div data-ng-if="authentication.user.roles[0] == \'user\'" data-ng-include="\'/modules/core/views/home.client.view.html\'"></div><div data-ng-if="authentication.user.roles[0] == \'teacher\'" data-ng-include="\'/modules/core/views/teacher.client.view.html\'"></div>'),$templateCache.put("/assets/modules/core/views/teacher.client.view.html",'<section data-ng-controller="ClassroomController"><h4>Your classroom</h4><accordion class="requests" ng-if="classroom.requests.length > 0"><accordion-group><accordion-heading><button class="btn-acceptReq btn btn-success btn-xs">Accept all</button><div class="reqHead"><span>New class join requests</span><span class="badge">{{classroom.requests.length}}</span></div></accordion-heading><table class="table-reqs table table-striped table-bordered"><tr ng-repeat="req in classroom.requests"><td>{{req.displayName}}</td><td>{{req.email}}</td><td><div class="btn-group btn-group-xs"><button class="btn btn-success">Accept</button> <button class="btn btn-danger">Reject</button></div></td></tr></table></accordion-group></accordion><div class="classroom"><div class="classBtns"><div class="addStudent"><input type="email" class="form-control addStudentEmail" placeholder="Enter email of student to add"> <button class="btn btn-primary btn-small">Add student</button></div><button class="btn btn-primary btn-small">Email student(s)</button> <button class="btn btn-primary btn-small">Remove student(s)</button> <button class="btn btn-primary btn-small">Export to file</button></div><table class="table-classroom table table-striped table-bordered"><tr><td></td><td></td><td>Name</td><td>Email</td><td>Section</td><td>Completed</td><td>Time Spent</td><td>L1:L2</td><td>Alerts</td></tr><tr><tbody ng-repeat="section in classroom.sections"><tr ng-repeat="student in section.members"><td ng-if="$index == 0" rowspan="{{section.members.length}}">{{section.name}}</td><td><input type="checkbox"></td><td>{{student.displayName}}</td><td>{{student.email}}</td><td><div class="btn-group" dropdown><button type="button" class="btn btn-primary btn-xs dropdown-toggle" dropdown-toggle>A <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li>B</li><li>C</li></ul></div></td><td>{{student.completed}}5 exchanges</td><td>{{student.timespent}}37 mins</td><td>{{student.l1_l2}}6:4</td><td>{{student.alerts}}<span class="label label-success">No</span></td></tr></tbody></tr></table></div></section>'),$templateCache.put("/assets/modules/doexch/views/doexch.client.view.html",'<section data-ng-controller="DoExchController"><div data-ng-show="doneTasks[ct_task].state < 5 && doneTasks[ct_task].task.type == \'ftd-img\'" data-ng-include="\'/modules/doexch/views/partials/ftd-img.html\'"></div><div data-ng-show="doneTasks[ct_task].state < 5 && doneTasks[ct_task].task.type == \'loc-inst\'" data-ng-include="\'/modules/doexch/views/partials/loc-inst.html\'"></div><div data-ng-show="doneTasks[ct_task].state === 5" data-ng-include="\'/modules/doexch/views/partials/debrief.html\'"></div></section>'),$templateCache.put("/assets/modules/doexch/views/partials/debrief.html",'<style>slider {\n  display: inline-block;\n  position: relative;\n  height: 7px;\n  width: 100%;\n  margin: 50px 5px 5px 5px;\n  vertical-align: middle;\n}\nslider span {\n  white-space: normal!important;\n  width: 200px;\n  text-align: center;\n  position: absolute;\n  display: inline-block;\n}\nslider span.base {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\nslider span.bar {\n  width: 100%;\n  height: 100%;\n  z-index: 0;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #c0c0c0), color-stop(1, #8d8d8d));\n  background: -webkit-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -moz-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -o-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: -ms-linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  background: linear-gradient(top, #c0c0c0 0, #8d8d8d 100%);\n  -webkit-box-shadow: inset 2px 2px 5px;\n  box-shadow: inset 2px 2px 5px;\n}\nslider span.bar.selection {\n  width: 0%;\n  z-index: 1;\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #13b6ff), color-stop(1, #00a8f3));\n  background: -webkit-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -moz-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -o-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: -ms-linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  background: linear-gradient(top, #13b6ff 0, #00a8f3 100%);\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\nslider span.pointer {\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  top: -12px;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 2;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n}\nslider span.pointer:after {\n  content: \'\';\n  background-color: #808080;\n  width: 16px;\n  height: 16px;\n  position: absolute;\n  top: 6px;\n  left: 5.5px;\n  -webkit-border-radius: 1em/1em;\n  border-radius: 1em/1em;\n}\nslider span.pointer:hover:after {\n  background-color: #000;\n}\nslider span.pointer.active:after {\n  background-color: #f00;\n}\nslider span.bubble {\n  cursor: default;\n  top: -45px;\n  padding: 1px 3px 1px 3px;\n  font-size: 1em;\n  font-family: sans-serif;\n}\nslider span.bubble.selection {\n  top: 15px;\n}\nslider span.bubble.limit {\n  color: #808080;\n}</style><div class="panel panel-default" ng-cloak><div class="panel-heading"><h3 class="panel-title">Please answer these questions and click \'Submit\' to complete the exchange</h3></div><div class="panel-body"><div ng-show="reportRequired" ng-class="{\'reportUndonePanel\': report.length < reportMinChars}" class="panel panel-default debriefItemPanel"><div class="panel-body"><div class="reportLabel"><label for="report">Your class requires a report of at least {{reportMinChars}} characters:</label><button ng-show="report.length < reportMinChars" type="button" class="report-do-later-btn btn btn-danger btn-xs" ng-click="reportRequired = false">Do this later</button></div><textarea ng-model="report" class="debriefTextArea form-control" rows="10" id="report" resize="none"></textarea></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="ratePartnerSlider">Please rate your partner\'s participation during this exchange.</label><div id="ratePartnerSlider"><slider floor="{{ratePartnerSlider.floor}}" ceiling="{{ratePartnerSlider.ceil}}" step="{{ratePartnerSlider.step}}" translate-fn="ratePartnerTrans" ng-model="ratePartner"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="rateADiffSlider">Please rate the difficulty of the first puzzle.</label><div id="rateADiffSlider"><slider floor="{{rateADiffSlider.floor}}" ceiling="{{rateADiffSlider.ceil}}" step="{{rateADiffSlider.step}}" translate-fn="rateDiffTrans" ng-model="rateADiff"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="rateBDiffSlider">Please rate the difficulty of the second puzzle.</label><div id="rateBDiffSlider"><slider floor="{{rateBDiffSlider.floor}}" ceiling="{{rateBDiffSlider.ceil}}" step="{{rateBDiffSlider.step}}" translate-fn="rateDiffTrans" ng-model="rateBDiff"></slider></div></div></div><div class="panel panel-default debriefItemPanel"><div class="panel-body"><label for="comment">Any further thoughts or comments:</label><textarea class="debriefTextArea form-control" rows="10" id="comment" resize="none"></textarea></div></div><a class="btn btn-primary btn-lg" ng-click="submitDebrief()" target="_blank">Submit</a></div><div></div></div>'),$templateCache.put("/assets/modules/doexch/views/partials/ftd-img.html",'<style>div#v-streams {display: inline-block}\n  img.puzzle_img {float:left; width: 400px}\n  div.twentyTwentyContainer{float:left; width: 400px}\n  div.vstream {width: 150px; height: 100px; border: 2px solid}</style><div ng-hide="$root.streamStarted" class="panel panel-default" ng-cloak>You need to permit Convercise to access your camera and mic.</div><div ng-show="$root.streamStarted" class="panel panel-default" ng-cloak><div class="panel-heading"><h2 class="panel-title">Do this puzzle in {{doneTasks[ct_task].langfull}}</h2></div><div class="panel-body"><div class="top-part"><div ng-if="doneTasks[ct_task].state == 1" class="img_div"><img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].img}}"></div><div class="twentyTwentyContainer" data-ng-show="doneTasks[ct_task].state > 1"><div twenty-twenty="true" id="compareImgs" ng-if="doneTasks[ct_task].state > 1" class="img_div"><img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].task.img1}}"> <img class="puzzle_img" src="{{taskpath}}/{{doneTasks[ct_task].ind}}/{{doneTasks[ct_task].task.img2}}"></div></div><video-chat killpeer="killPeer"></video-chat></div><div ng-if="doneTasks[ct_task].state == 1" class="instructions">Talk to your partner to find the difference between the pictures you see.</div><div ng-if="doneTasks[ct_task].state == 2" class="instructions">Was your answer correct?</div><div ng-if="doneTasks[ct_task].state == 3" class="instructions">Enter the correct answer.</div><div class="bottom-part"><div class="bottom-div"><div class="answerText" id="text"><textarea ng-if="doneTasks[ct_task].state == 1 || doneTasks[ct_task].state == 3" data-ng-hide="doneTasks[ct_task].native" id="textinput" class="answerTextInput" data-ng-model="doneTasks[ct_task].answer" placeholder="Enter Your Answer Here"></textarea><span ng-if="doneTasks[ct_task].state == 2" data-ng-hide="doneTasks[ct_task].native">{{doneTasks[ct_task].answer}}</span> <span data-ng-show="doneTasks[ct_task].native">{{doneTasks[ct_task].answer}}</span></div><a ng-if="doneTasks[ct_task].state == 1" data-ng-show="doneTasks[ct_task].native" class="accceptAnswBtn btn btn-primary btn-lg" ng-click="acceptAnswer()" target="_blank" ng-disabled="doneTasks[ct_task].answer.length < 4">Accept your partner\'s answer</a><div ng-if="doneTasks[ct_task].state == 1" data-ng-hide="doneTasks[ct_task].native" class="learnerInst">With your partner\'s help, compose an answer and write it in the field to the left.</div><div ng-if="doneTasks[ct_task].state == 2" class="accceptAnswBtnsDiv"><a class="yesOrNoBtn btn btn-primary btn-lg" ng-click="rightAnswer()" target="_blank">Yes</a> <a class="yesOrNoBtn btn btn-warning btn-lg" ng-click="wrongAnswer()" target="_blank">No</a></div><a ng-if="doneTasks[ct_task].state == 3" data-ng-show="doneTasks[ct_task].native" class="accceptAnswBtn btn btn-primary btn-lg" ng-click="acceptFinalAnswer()" target="_blank">Accept the final answer</a></div></div></div></div>'),$templateCache.put("/assets/modules/doexch/views/partials/loc-inst.html",'<style>div#v-streams {display: inline-block}\nimg.puzzle_img {float:left; width: 400px}\ndiv.twentyTwentyContainer{float:left; width: 400px}\ndiv.vstream {width: 150px; height: 100px; border: 2px solid}</style><div class="panel panel-default" ng-cloak><div class="panel-heading"><h3 class="panel-title">Do this puzzle in {{tasks[ct_task].langs}}</h3></div><div class="panel-body"><ng-i f="tasks[ct_task].state == 1">{{taskpath}}/{{tasks[ct_task].ind}}/{{tasks[ct_task].sktch}}<canvas loc-inst-processing="sketch" ng-click="move($sketch)"></canvas><div><div><div></div></div></div></ng-i></div></div>'),$templateCache.put("/assets/modules/users/views/authentication/signin.client.view.html",'<section class="row" data-ng-controller="AuthenticationController"><h3 class="col-md-12 text-center">Sign in using your social accounts</h3><div class="col-md-12 text-center"><a href="/auth/facebook" class="undecorated-link"><img src="/modules/users/img/buttons/facebook.png"></a> <a href="/auth/twitter" class="undecorated-link"><img src="/modules/users/img/buttons/twitter.png"></a> <a href="/auth/google" class="undecorated-link"><img src="/modules/users/img/buttons/google.png"></a> <a href="/auth/linkedin" class="undecorated-link"><img src="/modules/users/img/buttons/linkedin.png"></a> <a href="/auth/github" class="undecorated-link"><img src="/modules/users/img/buttons/github.png"></a></div><h3 class="col-md-12 text-center">Or with your account</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="signin()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="form-group"><label for="password">Password</label><input type="password" id="password" name="password" class="form-control" data-ng-model="credentials.password" placeholder="Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-primary">Sign in</button>&nbsp; or&nbsp; <a href="/#!/signup">Sign up</a></div><div class="forgot-password"><a href="/#!/password/forgot">Forgot your password?</a></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/authentication/signup.client.view.html",'<section class="row" data-ng-controller="AuthenticationController"><h3 class="col-md-12 text-center">Sign up now!</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form name="userForm" data-ng-submit="signup()" class="signin form-horizontal" novalidate autocomplete="off"><fieldset><div class="form-group"><label for="firstName">First Name</label><input type="text" required id="firstName" name="firstName" class="form-control" data-ng-model="credentials.firstName" placeholder="First Name"></div><div class="form-group"><label for="lastName">Last Name</label><input type="text" id="lastName" name="lastName" class="form-control" data-ng-model="credentials.lastName" placeholder="Last Name"></div><div class="form-group"><label for="email">Email</label><input type="email" id="email" name="email" class="form-control" data-ng-model="credentials.email" placeholder="Email"></div><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="form-group"><label for="l1">First language</label><select class="form-control" data-ng-model="credentials.l1" ng-options="lang.short as lang.name for lang in langs"></select></div><div class="form-group"><label for="l2">Learning language</label><select class="form-control" data-ng-model="credentials.l2" ng-options="lang.short as lang.name for lang in langs"></select></div><div class="form-group"><label for="password">Password</label><input type="password" id="password" name="password" class="form-control" data-ng-model="credentials.password" placeholder="Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Sign up</button>&nbsp; or&nbsp; <a href="/#!/signin" class="show-signup">Sign in</a></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/password/forgot-password.client.view.html",'<section class="row" data-ng-controller="PasswordController"><h3 class="col-md-12 text-center">Restore your password</h3><p class="small text-center">Enter your account username.</p><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="askForPasswordReset()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><input type="text" id="username" name="username" class="form-control" data-ng-model="credentials.username" placeholder="Username"></div><div class="text-center form-group"><button type="submit" class="btn btn-primary">Submit</button></div><div data-ng-show="error" class="text-center text-danger"><strong>{{error}}</strong></div><div data-ng-show="success" class="text-center text-success"><strong>{{success}}</strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password-invalid.client.view.html",'<section class="row text-center"><h3 class="col-md-12">Password reset is invalid</h3><a href="/#!/password/forgot" class="col-md-12">Ask for a new password reset</a></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password-success.client.view.html",'<section class="row text-center"><h3 class="col-md-12">Password successfully reset</h3><a href="/#!/" class="col-md-12">Continue to home page</a></section>'),$templateCache.put("/assets/modules/users/views/password/reset-password.client.view.html",'<section class="row" data-ng-controller="PasswordController"><h3 class="col-md-12 text-center">Reset your password</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="resetUserPassword()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="newPassword">New Password</label><input type="password" id="newPassword" name="newPassword" class="form-control" data-ng-model="passwordDetails.newPassword" placeholder="New Password"></div><div class="form-group"><label for="verifyPassword">Verify Password</label><input type="password" id="verifyPassword" name="verifyPassword" class="form-control" data-ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Update Password</button></div><div data-ng-show="error" class="text-center text-danger"><strong>{{error}}</strong></div><div data-ng-show="success" class="text-center text-success"><strong>{{success}}</strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/change-password.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center">Change your password</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form data-ng-submit="changeUserPassword()" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="currentPassword">Current Password</label><input type="password" id="currentPassword" name="currentPassword" class="form-control" data-ng-model="passwordDetails.currentPassword" placeholder="Current Password"></div><div class="form-group"><label for="newPassword">New Password</label><input type="password" id="newPassword" name="newPassword" class="form-control" data-ng-model="passwordDetails.newPassword" placeholder="New Password"></div><div class="form-group"><label for="verifyPassword">Verify Password</label><input type="password" id="verifyPassword" name="verifyPassword" class="form-control" data-ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Save Password</button></div><div data-ng-show="success" class="text-center text-success"><strong>Password Changed Successfully</strong></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/edit-profile.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center">Edit your profile</h3><div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"><form name="userForm" data-ng-submit="updateUserProfile(userForm.$valid)" class="signin form-horizontal" autocomplete="off"><fieldset><div class="form-group"><label for="firstName">First Name</label><input type="text" id="firstName" name="firstName" class="form-control" data-ng-model="user.firstName" placeholder="First Name"></div><div class="form-group"><label for="lastName">Last Name</label><input type="text" id="lastName" name="lastName" class="form-control" data-ng-model="user.lastName" placeholder="Last Name"></div><div class="form-group"><label for="email">Email</label><input type="email" id="email" name="email" class="form-control" data-ng-model="user.email" placeholder="Email"></div><div class="form-group"><label for="username">Username</label><input type="text" id="username" name="username" class="form-control" data-ng-model="user.username" placeholder="Username"></div><div class="text-center form-group"><button type="submit" class="btn btn-large btn-primary">Save Profile</button></div><div data-ng-show="success" class="text-center text-success"><strong>Profile Saved Successfully</strong></div><div data-ng-show="error" class="text-center text-danger"><strong data-ng-bind="error"></strong></div></fieldset></form></div></section>'),$templateCache.put("/assets/modules/users/views/settings/social-accounts.client.view.html",'<section class="row" data-ng-controller="SettingsController"><h3 class="col-md-12 text-center" data-ng-show="hasConnectedAdditionalSocialAccounts()">Connected social accounts:</h3><div class="col-md-12 text-center"><div data-ng-repeat="(providerName, providerData) in user.additionalProvidersData" class="remove-account-container"><img ng-src="/modules/users/img/buttons/{{providerName}}.png"> <a class="btn btn-danger btn-remove-account" data-ng-click="removeUserSocialAccount(providerName)"><i class="glyphicon glyphicon-trash"></i></a></div></div><h3 class="col-md-12 text-center">Connect other social accounts:</h3><div class="col-md-12 text-center"><a href="/auth/facebook" data-ng-hide="isConnectedSocialAccount(\'facebook\')" class="undecorated-link"><img src="/modules/users/img/buttons/facebook.png"></a> <a href="/auth/twitter" data-ng-hide="isConnectedSocialAccount(\'twitter\')" class="undecorated-link"><img src="/modules/users/img/buttons/twitter.png"></a> <a href="/auth/google" data-ng-hide="isConnectedSocialAccount(\'google\')" class="undecorated-link"><img src="/modules/users/img/buttons/google.png"></a> <a href="/auth/linkedin" data-ng-hide="isConnectedSocialAccount(\'linkedin\')" class="undecorated-link"><img src="/modules/users/img/buttons/linkedin.png"></a> <a href="/auth/github" data-ng-hide="isConnectedSocialAccount(\'github\')" class="undecorated-link"><img src="/modules/users/img/buttons/github.png"></a></div></section>')}]);